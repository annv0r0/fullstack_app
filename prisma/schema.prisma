datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Item {
  id          String    @id @default(cuid())
  article     String    @unique
  title       String
  description String?
  weight      Int?
  unit        String?
  price       Decimal?  @db.Decimal(10, 2)
  available   Boolean?
  rating      Int?
  image       String?
  date        DateTime? @default(now())

  cartItems CartItem[]
}

model Cart {
  id        String     @id @default(cuid())
  userId    String?    @unique
  items     CartItem[]
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
}

model CartItem {
  id        String  @id @default(cuid())
  cartId    String
  productId String
  quantity  Int     @default(1)
  title     String
  price     Decimal @db.Decimal(10, 2)
  image     String?

  cart    Cart  @relation(fields: [cartId], references: [id], onDelete: Cascade)
  product Item? @relation(fields: [productId], references: [id], onDelete: SetNull)

  @@unique([cartId, productId])
}
